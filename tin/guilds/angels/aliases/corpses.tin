#alias use_corpse {
  #math {gp1_pct_raw} {($gp1 * 1.00) / $gp1_max * 100};
  #math {gp2_pct_raw} {($gp2 * 1.00) / $gp2_max * 100};

  #if {$gp1_pct_raw < $gp2_pct_raw && "$use_disperse" == "true"} {
    !disperse;
  } {
    !rites;
    #if {"$use_disperse" == "true"} {
      !disperse;
    } {
      #if {"$use_spoon" == "true"} {
        !eat corpse;
      };
    };
  };
}

#alias f9 {
  !wrap corpse;
  #if {"$flying" == "true"} {!swoop all} {!get all};
}

#alias f10 {
  use_corpse;
  #if {"$flying" == "true"} {!swoop all} {!get all};
}

#nop Don't use hp in this alias, it messes with angel actions;
#alias redi {
  !unwrap;
  !disperse;
}

#alias redis {
  #if {"%1" != ""} {
    #loop 1 %1 $loop {redi};
  };
  #else {
    #if {$corpses < 5} {#var max_to_use $corpses} {#var max_to_use 5}
    #if {$corpses > 0} {#loop 1 $max_to_use $loop {redi}};
    #unvar max_to_use;
  };
}

#alias reri {
  !unwrap;
  !rites;
  !disperse;
}

#alias commands_after_corpse {
  #nop Riposte makes mobs kill themselves...;
  #if {"$last_killer" == "$last_kill"} {
    !glance;
    wrap_or_use_corpse;
    #if {"$flying" == "true"} {!swoop all} {!get all};
  };

  #var {awed} {false};
}
